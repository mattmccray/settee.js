(function(){var p,q,F,n,G,o,r,H,s,t,u,I,v,i,N,w,x,y,J,K,z,A,L,M,B,C,D,E={}.hasOwnProperty;o=this;u=o.settee;n={};N=Array.prototype.slice;r=Array.prototype.forEach;s=Array.prototype.map;H=Array.isArray;t=String.prototype.trim;v=/([\w\-_\.]*)="([\w\-_:@\. ]*)"/;p=/([\w\-_\.]*)=([\w\-_:@\.]*)/;G=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,'\\$1')};L;L=function(c,e,g){var f;f=[];if(c===null){return f}if(s&&c.map===s){return c.map(e,g)}K(c,function(a,d,b){return f[f.length]=e.call(g,a,d,b)});if(c.length===+c.length){f.length=c.length}return f};K=function(a,d,b){var c,e,g,f,j;if(a===null){return}if(r&&a.forEach===r){return a.forEach(d,b)}else if(a.length===+a.length){for(c=f=0,j=a.length;f<j;c=++f){e=a[c];if(c in a&&d.call(b,e,c,a)===breaker){return}}}else{for(g in a){if(!E.call(a,g))continue;e=a[g];if(d.call(b,e,g,a)===breaker){return}}}};D=function(a,d){if(a===null){return""}if(!d&&t){return t.call(a)}d=d?G(d):'\\s';a.replace(new RegExp('\^['+characters+']+|['+characters+']+$','g'),'');return a.replace(/^[#{char}]+|[#{char}]+$/g,'')};A=function(a){return typeof a==='string'};z=H||function(a){return!!(a&&a.concat&&a.unshift&&!a.callee)};M=function(a,d){var b,c,e,g,f;if(d==null){d=true}if(A(a)){if(v.test(a)){g=a.match(v),b=g[0],c=g[1],e=g[2];if(d){return""+c+"=\""+e+"\""}return{key:c,value:e}}else if(p.test(a)){f=a.match(p),b=f[0],c=f[1],e=f[2];if(d){return""+c+"=\""+e+"\""}return{key:c,value:e}}else{return false}}else{return false}};y=function(a){if(a[0]==='@'||a[0]===':'){return"this."+(a.substring(1))}else{return a}};C=function(){var a,d,b,c,e;if(this.text.length===0){return""}c=0;b=1;a=0;d=this.text.charAt(0);if(d==='('||d===')'){b=1;this.balanced+=d==='('?1:-1}else if(d==='"'){b=this.text.search(/[^\\]"/)+1;a=1}else if(d==="'"){b=this.text.search(/[^\\]'/)+1;a=1}else{b=this.text.search(/[ \n)]/)}if(b<1){b=this.text.length}e=this.text.substring(c,b);this.text=D(this.text.substring(b+a));return e};B=function(){var a,d,b;d=[];b=C.apply(this);while(b!==')'&&b!==""){a=b==='('?B.apply(this):b;d.push(a);b=C.apply(this)}return d};J=function(a){var d,b,c;c={text:D(a),balanced:0};d=['list'];while(c.text.length){b=B.apply(c);d=d.concat(b)}return[d,c]};I=function(a,d){var b,c,e;e=J(a),b=e[0],c=e[1];return b.pop()};x=function(a,d){var b,c,e,g,f,j,h,k,l,m;e=[];f=a[0];if(f.indexOf('.')>=0){if(f==='.'){f='.';e.push(f)}else{g=f.split('.');f=g.shift();if(f===''){f='div'}e.push(f);for(h=0,l=g.length;h<l;h++){b=g[h];e.push("class="+b)}}}else{e.push(f)}for(c=k=0,m=a.length;k<m;c=++k){j=a[c];if(c>0){if(z(j)){e.push(x(j,d))}else{e.push(j)}}}return e};q=function(a,d){var b,c,e,g,f,j,h,k,l,m;f=[];e={};j=a.shift();for(l=0,m=a.length;l<m;l++){h=a[l];if(z(h)){f.push(q(h,d))}else{if(b=M(h,false)){g=b.key;k=y(b.value);if(e[g]){e[g]+=" "+k}else{e[g]=k}}else if(h[0]==='"'||h[0]==="'"){f.push(JSON.stringify(h.substring(1)))}else if(h[0]==='@'||h[0]===":"){f.push(y(h))}else{f.push(JSON.stringify(h))}}}c='';for(g in e){if(!E.call(e,g))continue;k=e[g];c+=String(g).indexOf('this.')!==0?JSON.stringify(g):g;c+=':';c+=String(k).indexOf('this.')!==0?JSON.stringify(k):k;c+=","}return""+d+"('"+j+"', { "+(c.substr(0,c.length-1))+" }, ["+(f.join(', '))+"])"};F=function(a,d){var b,c;b='b';c=q(a,b);return new Function(b,"return "+c+";")};w=function(a,d,b){var c,e,g;if(d==null){d={}}if(b==null){b=[]}if(a==='.'){return b.join('')}else if(n[a]){return n[a](a,d,b)}else{c='';for(e in d){if(!E.call(d,e))continue;g=d[e];c+=" "+e+"=\""+g+"\""}return"<"+(a+c)+">"+(b.join(''))+"</"+a+">"}};i=function(d){var b,c;b=I(d);b=x(b);c=F(b);return function(a){if(a==null){a={}}return c.call(a,w)}};i.to_html=function(a,d,b){if(d==null){d={}}return i(a)(d)};i.define=function(k,l){var m;if(A(l)){m=i(l);l=(function(h){return function(a,d,b){var c,e,g,f,j;c={blocks:b.join(''),"yield":b.join('')};for(g=f=0,j=b.length;f<j;g=++f){e=b[g];c["block"+(g+1)]=e}return h(c)}})(m)}n[k]=l;return i};i.undefine=function(a){if(n[a]){delete n[a]}return i};i.noConflict=function(){if(u){o.settee=u}else{delete o.settee}return i};i.tag_builder=w;if((typeof module!=="undefined"&&module!==null?module.exports:void 0)!=null){module.exports.settee=i}else{o.settee=i}}).call(this);